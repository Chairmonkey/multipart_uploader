<html>
	<head>
		<title>&#220;pload</title>
	</head>
	<body>
		<h1>&#220;pload</h1>
		<form enctype="multipart/form-data" action="/upload" method="post">
			<input type="file" name="upload" multiple="multiple"><br>
			<div style="height: 15px; width:100%;">
				<span id="status" style="display: none;">
					<strong>Status:</strong>
					<span id="percentage"></span>
				</span>
			</div>
			<textarea name="description" rows="4"></textarea><br />
			<input type="submit" />
		</form>

		<footer>
			<script src="/socket.io/socket.io.js"></script>
			<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
			<script src="http://malsup.github.com/jquery.form.js"></script> 
			<script type="text/javascript">
				$(document).ready(function() {
					$("form").ajaxForm();
				})

				$("input:file").change(function() {
					$("form").submit();
				})

				$("form").submit(function() {
					var progress_socket = io.connect('http://localhost:8000/upload');
					progress_socket.on('progress', function(data) {
						$("#status").show();
						$("#percentage").text(data);
					});
				})
			</script>
		</footer>
	</body>
</html